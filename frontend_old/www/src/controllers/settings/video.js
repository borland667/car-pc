// Generated by CoffeeScript 1.6.3
(function() {
  angular.module('carPc').controller('SettingsVideoCtrl', function($scope, $ionicLoading, $timeout, httpHelper, video) {
    var loadDevices;
    loadDevices = function(isFirst) {
      if (isFirst) {
        $ionicLoading.show({
          template: 'Loading...'
        });
      }
      return video.getDevices().then(function(devices) {
        $ionicLoading.hide();
        return $scope.devices = devices;
      }, function(response) {
        $ionicLoading.hide();
        return httpHelper.loadFailAlert(response);
      });
    };
    loadDevices(true);
    $scope.changeUses = function(device) {
      return $timeout(function() {
        return video.setDevicesUses(device.id, device.is_uses).then(function() {
          return loadDevices();
        }, httpHelper.loadFailAlert);
      }, 100);
    };
    return $scope.changeResolution = function(device) {
      return video.setDevicesResolution(device.id, device.resolution).then(function() {
        return loadDevices();
      }, httpHelper.loadFailAlert);
    };
  });

}).call(this);
